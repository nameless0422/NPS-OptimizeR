---

# ✅ 기대수명 계산 모델 설계 (Life Expectancy Prediction Model)

---

## ✅ 1. **모델 개요**
- 사용자의 **개인 건강 정보**, **생활습관**, **가족력**, **기본 인구통계 정보**를 입력 받아  
  → **기본 기대수명**(통계청 기준)을 출발점으로  
  → 각 요소별 **가중치 및 보정값**을 반영하여  
  → **개인 맞춤 기대수명**을 예측하는 시스템.

---

## ✅ 2. **기본 기대수명 데이터**
- 기준: **통계청/WHO 제공 기대수명**
  - 남성: **80세**
  - 여성: **86세**

> 이를 **베이스라인**으로 설정 후 보정함.

---

## ✅ 3. **입력 변수 정의 (Features)**

| **카테고리** | **변수명**         | **값의 유형 및 범위**               | **기대수명 보정** (예시)    |
|------------|------------------|---------------------------------|-------------------------|
| 기본 정보    | gender          | 남성(0), 여성(1)               | 여성 +6년               |
| 건강 상태    | bmi             | 수치 (18.5 ~ 30 이상)          | 비만 -3년, 저체중 -2년     |
|            | chronic_disease | 고혈압, 당뇨, 심혈관질환, 암 등 개수 | 질병 1개당 -3년            |
|            | mental_health   | 양호(0), 우울/불안(1)          | 나쁨 -1년                |
| 생활습관    | smoking_status  | 비흡연(0), 금연(1), 흡연(2)    | 흡연 -5년, 금연 -1년       |
|            | drinking_status | 없음(0), 적당(1), 과음(2)      | 과음 -3년                |
|            | exercise_freq   | 없음(0), 주1~2회(1), 주3회 이상(2) | 규칙적 운동 +3년           |
| 가족력     | parental_age    | 부모 평균 사망 나이 (숫자)     | 80세 이상 부모 +2년, 60세 미만 부모 -3년 |
| 예방 관리   | checkup_freq    | 매년(2), 2년에 1회(1), 없음(0) | 없음 -1년, 매년 +1년       |

---

## ✅ 4. **모델 로직 및 계산 흐름**

### 기본 기대수명 가져오기
```python
def get_base_life_expectancy(gender):
    return 80 if gender == 0 else 86
```

---

### 가중치 및 보정값 합산
```python
def calculate_adjustments(user_input):
    adjustment = 0

    # BMI
    if user_input['bmi'] < 18.5:
        adjustment -= 2
    elif user_input['bmi'] >= 30:
        adjustment -= 3

    # Chronic disease
    adjustment -= user_input['chronic_disease_count'] * 3

    # Mental health
    if user_input['mental_health'] == 1:
        adjustment -= 1

    # Smoking
    if user_input['smoking_status'] == 2:
        adjustment -= 5
    elif user_input['smoking_status'] == 1:
        adjustment -= 1

    # Drinking
    if user_input['drinking_status'] == 2:
        adjustment -= 3

    # Exercise
    if user_input['exercise_freq'] == 2:
        adjustment += 3

    # Parental longevity
    if user_input['parental_age_avg'] >= 80:
        adjustment += 2
    elif user_input['parental_age_avg'] < 60:
        adjustment -= 3

    # Health checkup frequency
    if user_input['checkup_freq'] == 2:
        adjustment += 1
    elif user_input['checkup_freq'] == 0:
        adjustment -= 1

    return adjustment
```

---

### 최종 기대수명 반환
```python
def predict_life_expectancy(user_input):
    base = get_base_life_expectancy(user_input['gender'])
    adjustments = calculate_adjustments(user_input)
    predicted_life = base + adjustments
    return max(predicted_life, 0)  # 최소 기대수명 0세 방어
```

---

## ✅ 5. **예시 입력 & 출력**
```python
user_input = {
    'gender': 0,  # 남성
    'bmi': 27,
    'chronic_disease_count': 1,
    'mental_health': 1,
    'smoking_status': 2,  # 현재 흡연
    'drinking_status': 1,  # 적당히 음주
    'exercise_freq': 1,  # 주1~2회
    'parental_age_avg': 75,
    'checkup_freq': 2,  # 매년 건강검진
}

predicted = predict_life_expectancy(user_input)
print(f'예상 기대수명: {predicted}세')
```

---

## ✅ 6. **추후 고도화 방향**
| 방향               | 설명                                  |
|------------------|-------------------------------------|
| 머신러닝 기반 모델 | 의료 빅데이터 + 생존 분석 알고리즘 (Cox 회귀 등) |
| 외부 데이터 연동   | 보험사/건강보험공단 API → 실시간 데이터 수집 |
| 시나리오 제공      | '만약 네가 금연하면?', '운동량을 늘리면?' 가상 시뮬레이션 |
| 시각화            | 기대수명 트렌드 그래프, 시나리오 비교 차트 |

---

## ✅ 7. **기대수명 기반 국민연금 수령 최적화 연계**
- 예상 기대수명으로 수령 시점 전략 제안
- 기대수명 변화에 따른 시뮬레이션 제공 (건강 관리 동기 부여!)

---

## ✅ 8. **다음 단계**
1. 파라미터 조정 및 가중치 개선  
2. 사용자 설문 설계 및 UX 연결  
3. 시뮬레이션 툴 / 추천 시스템 설계  

---
